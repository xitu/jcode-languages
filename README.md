# JCode Custom Lang

ç ä¸Šæ˜é‡‘è‡ªå®šä¹‰è¯­è¨€åˆé›†

## ä½¿ç”¨è¯´æ˜

![](https://p5.ssl.qhimg.com/t010e5342c2f84b519b.png)

#### 1. `Script Tab` ä¸‹é€‰æ‹© `Custom`

#### 2. ç¬¬ä¸€è¡Œè¾“å…¥å¯¹åº”è¯­è¨€çš„Hashbangï¼Œæ¯”å¦‚ï¼š

```js
#!/jcode/lang/wenyan https://xitu.github.io/jcode-languages/dist/lang-wenyan.json
```

æ¥ç€è¾“å…¥è¯¥è¯­è¨€ä»£ç ï¼Œå¦‚

```wenyan
å¾å˜—è§€ã€Œã€Œæ§åˆ¶ç§˜è¡“ã€ã€ä¹‹æ›¸ã€‚æ–¹æ‚Ÿã€Œç­‰å¾…æŒ‡é‡æŒ‰ä¸‹ã€ã€Œç­‰å¾…æŒ‡é‡ç§»å‹•ã€ä¹‹ç¾©ã€‚
å¾å˜—è§€ã€Œã€Œç•«è­œã€ã€ä¹‹æ›¸ã€‚æ–¹æ‚Ÿã€Œå‚™ç´™ã€ã€Œæ“‡ç­†ã€ã€Œè˜¸è‰²ã€ã€Œè½ç­†ã€ã€Œé‹ç­†ã€ã€Œæç­†ã€ã€Œè¨­è‰²ã€ã€Œè£±ç•«ã€ä¹‹ç¾©ã€‚

å¾æœ‰ä¸€è¡“ã€‚åä¹‹æ›°ã€Œç¹ªè£½ã€ã€‚æ¬²è¡Œæ˜¯è¡“ã€‚å¿…å…ˆå¾—ä¸€ç‰©ã€‚æ›°ã€Œç´™ã€ã€‚
è¡Œæ˜¯è¡“ä»¥ä¿Ÿå…¶æ¯•ã€‚
æ˜¯è¡“æ›°ã€‚
  æ†ç‚ºæ˜¯ã€‚
    ä¸”æ–½ã€Œç­‰å¾…æŒ‡é‡ç§»å‹•ã€æ–¼ã€Œç´™ã€ã€‚ä»¥ä¿Ÿå…¶æ¯•ã€‚åä¹‹æ›°ã€ŒæŒ‡é‡ã€ã€‚
    å¤«ã€ŒæŒ‡é‡ã€ä¹‹ã€Œã€Œç¶“æ•¸ã€ã€è€…ã€‚åä¹‹æ›°ã€Œç¶“æ•¸ã€ã€‚
    å¤«ã€ŒæŒ‡é‡ã€ä¹‹ã€Œã€Œç·¯æ•¸ã€ã€è€…ã€‚åä¹‹æ›°ã€Œç·¯æ•¸ã€ã€‚
    å¤«ã€ŒæŒ‡é‡ã€ä¹‹ã€Œã€Œéµå€¼ã€ã€è€…ã€‚åä¹‹æ›°ã€Œéµå€¼ã€ã€‚
    å¤«ã€ŒæŒ‡é‡ã€ä¹‹ã€Œã€Œå‰ç¶“ã€ã€è€…ã€‚åä¹‹æ›°ã€Œæ©«ã€ã€‚
    å¤«ã€ŒæŒ‡é‡ã€ä¹‹ã€Œã€Œå‰ç·¯ã€ã€è€…ã€‚åä¹‹æ›°ã€Œç¸±ã€ã€‚
    æ–½ã€Œè½ç­†ã€æ–¼ã€Œç´™ã€æ–¼ã€Œæ©«ã€æ–¼ã€Œç¸±ã€ã€‚
    è‹¥ã€Œéµå€¼ã€ç­‰æ–¼é›¶è€…ã€‚æ–½ã€Œæç­†ã€æ–¼ã€Œç´™ã€ã€‚ä¹ƒæ­¢ä¹Ÿã€‚
    æ–½ã€Œé‹ç­†ã€æ–¼ã€Œç´™ã€æ–¼ã€Œç¶“æ•¸ã€æ–¼ã€Œç·¯æ•¸ã€ã€‚
    æ–½ã€Œæç­†ã€æ–¼ã€Œç´™ã€ã€‚
    æ–½ã€Œè¨­è‰²ã€æ–¼ã€Œç´™ã€ã€‚
  äº‘äº‘ã€‚
æ˜¯è¬‚ã€Œç¹ªè£½ã€ä¹‹è¡“ä¹Ÿã€‚

æ–½ã€Œå‚™ç´™ã€æ–¼äº”ç™¾ã€‚æ–¼äº”ç™¾ã€‚åä¹‹æ›°ã€Œç´™ã€ã€‚
æ–½ã€Œè˜¸è‰²ã€æ–¼ã€Œç´™ã€æ–¼ã€Œã€ŒèŠ±é’ã€ã€ã€‚
æ–½ã€Œæ“‡ç­†ã€æ–¼ã€Œç´™ã€æ–¼äº”ã€‚
æ–½ã€Œè£±ç•«ã€æ–¼ã€Œç´™ã€æ–¼ã€Œã€Œappã€ã€ã€‚

æ†ç‚ºæ˜¯ã€‚
  ä¸”æ–½ã€Œç­‰å¾…æŒ‡é‡æŒ‰ä¸‹ã€æ–¼ã€Œç´™ã€ã€‚ä»¥ä¿Ÿå…¶æ¯•ã€‚åä¹‹æ›°ã€ŒæŒ‡é‡ã€ã€‚
  ä¸”æ–½ã€Œç¹ªè£½ã€æ–¼ã€Œç´™ã€ã€‚ä»¥ä¿Ÿå…¶æ¯•ã€‚
äº‘äº‘ã€‚
```

#### 3. åœ¨è„šæœ¬ä¾èµ–ä¸­å¼•å…¥ `https://cdn.jsdelivr.net/npm/jcode-tools` å’Œä¾èµ–çš„è¯­è¨€è§£æè„šæœ¬ï¼Œå¦‚ `https://cdn.jsdelivr.net/npm/@wenyanlang/core/index.min.js`

#### 4. `Markup Tab` ä¸‹å¯¹è‡ªå®šä¹‰è¯­è¨€è¿›è¡Œè§£æï¼Œæ¯”å¦‚ï¼š

```html
<div id="app"></div>
<script>
  (async function() {
    const code = await JCode.getCustomCode();
    const jscode = Wenyan.compile(code, {
      logCallback: () => {},
      importPaths: ['https://akira-cn.github.io/wenyan-demos/'],
      allowHttp: true,
    });
    Wenyan.evalCompiled(`(async () => {${jscode}})()`);
  }());
</script>
```

#### 5. Serverç«¯è¯­è¨€

ç›®å‰ç ä¸Šæ˜é‡‘é€šè¿‡[CodeX-API](https://github.com/akira-cn/CodeX-API)æ”¯æŒServerç«¯ç¼–ç¨‹è¯­è¨€ã€‚

æ¯”å¦‚Rustè¯­è¨€ï¼š

[ä¾‹å­](https://code.juejin.cn/pen/7123427292306817060)

```html
<div id="app"></div>
<script type="module">
import {CodeXClient, logger} from 'https://cdn.jsdelivr.net/npm/jcode-tools@^0.10.2/dist/jcode-tools.esm.js';
(async () => {
  window.console = logger(app);
  console.log('æäº¤ä»£ç ï¼Œè¯·ç¨å€™');

  try {
    const code = new CodeXClient(); // é»˜è®¤ä¼šä»CustomCodeä¸­è·å–
    const result = await code.runCode();
    if(result.error) {
      console.error(result.error);
    }
    console.log(result.output);
  } catch(ex) {
    console.error(ex);
  }
})();
</script>
```

### æ”¯æŒè¯­è¨€

ç›®å‰å®˜æ–¹æ”¯æŒäº†9ç§è¯­è¨€ï¼š

| è¯­è¨€ | json æ–‡ä»¶ | ç¤ºä¾‹ | è¿è¡Œæ—¶ |
| --- | --- | --- | --- |
| [glsl](src/lang-lua.js) | [lang-glsl](https://xitu.github.io/jcode-languages/dist/lang-glsl.json) | [ğŸ¯ glsl-demo](https://code.juejin.cn/pen/7116418967081582623) | [glsl-doodle](https://github.com/akira-cn/glsl-doodle)
| [live & coffee](src/lang-coffee.js) | [lang-coffee](https://xitu.github.io/jcode-languages/dist/lang-coffee.json) | [â˜•ï¸ coffee-demo](https://code.juejin.cn/pen/7118946974367219726) [ğŸ¢ live-demo](https://code.juejin.cn/pen/7118944247788601352) | [coffeescript](https://github.com/jashkenas/coffeescript/) [livescript](https://github.com/gkz/LiveScript)|
| [lua](src/lang-lua.js) | [lang-lua](https://xitu.github.io/jcode-languages/dist/lang-lua.json) | [â™Ÿ lua-demo](https://code.juejin.cn/pen/7117234319281618974) | [fengari-lua](https://github.com/fengari-lua/fengari-web) |
| [markdown](src/lang-markdown.js) | [lang-markdown](https://xitu.github.io/jcode-languages/dist/lang-markdown.json) | [ğŸ““ markdown-demo](https://code.juejin.cn/pen/7117484770900049928) | [markdedjs](https://github.com/markedjs/marked) |
| [python](src/lang-python.js) | [lang-python](https://xitu.github.io/jcode-languages/dist/lang-python.json) | [ğŸ python-demo](https://code.juejin.cn/pen/7117216879185231902) | [brython](https://github.com/brython-dev/brython) |
| [scheme](src/lang-scheme.js) | [lang-scheme](https://xitu.github.io/jcode-languages/dist/lang-scheme.json) | [ğŸµ scheme-demo](https://code.juejin.cn/pen/7117496697122455588) | [lips](https://github.com/jcubic/lips) |
| [sql](src/lang-sql.js) | [lang-sql](https://xitu.github.io/jcode-languages/dist/lang-sql.json) | [ğŸ¦— sql-demo](https://code.juejin.cn/pen/7117569541948833823) | [jSQL](https://github.com/Pamblam/jSQL) |
| [webslides](src/lang-webslides.js) | [lang-webslides](https://xitu.github.io/jcode-languages/dist/lang-webslides.json) | [ğŸ™ webslides-demo](https://code.juejin.cn/pen/7115222187925045256) | [webslides.md](https://github.com/xitu/webslides.md) |
| [æ–‡è¨€æ–‡](src/lang-wenyan.js) | [lang-wenyan](https://xitu.github.io/jcode-languages/dist/lang-wenyan.json) | [ğŸ§ wenyan-demo](https://code.juejin.cn/pen/7117404732288663582) | [wenyan-lang](https://github.com/wenyan-lang/wenyan) |

ä»¥åŠå¤šç§Serverç«¯è¯­è¨€ï¼š

| è¯­è¨€ | json æ–‡ä»¶ | ç¤ºä¾‹ |
| --- | --- | --- | 
| c/c++ | [lang-cpp](https://xitu.github.io/jcode-languages/dist/lang-cpp.json) | [ğŸµ c-demo](https://code.juejin.cn/pen/7124117611972935716) [ğŸ™‰ c++-demo](https://code.juejin.cn/pen/7124118398396530719)
| dart | [lang-dart](https://xitu.github.io/jcode-languages/dist/lang-dart.json) | [ğŸ¦† dart-demo](https://code.juejin.cn/pen/7124194532933468168)
| erlang | [lang-erlang](https://xitu.github.io/jcode-languages/dist/lang-erlang.json) | [ğŸ¦„ erl-demo](https://code.juejin.cn/pen/7124262663164542989)
| golang | [lang-go](https://xitu.github.io/jcode-languages/dist/lang-go.json) | [ğŸ± go-demo](https://code.juejin.cn/pen/7124119816633319438)
| java | [lang-java](https://xitu.github.io/jcode-languages/dist/lang-java.json) | [â˜•ï¸ java-demo](https://code.juejin.cn/pen/7124119426709848095)
| javascript | [lang-javascript](https://xitu.github.io/jcode-languages/dist/lang-javascript.json) | [ğŸ¦‹ nodejs-demo-async](https://code.juejin.cn/pen/7121977600011927589)
| perl | [lang-perl](https://xitu.github.io/jcode-languages/dist/lang-perl.json) | [ğŸª perl-demo](https://code.juejin.cn/pen/7124188849688805412)
| php | [lang-php](https://xitu.github.io/jcode-languages/dist/lang-php.json) | [ğŸ˜ php-demo](https://code.juejin.cn/pen/7124185922190606373)
| python | [lang-python](https://xitu.github.io/jcode-languages/dist/lang-python.json) | [ğŸ python-demo](https://code.juejin.cn/pen/7124120405828173831) |
| ruby | [lang-ruby](https://xitu.github.io/jcode-languages/dist/lang-ruby.json) | [ğŸ¦‘ ruby-demo](https://code.juejin.cn/pen/7124181246045290532) |
| rust | [lang-rust](https://xitu.github.io/jcode-languages/dist/lang-rust.json) | [ğŸ¦ rust-demo](https://code.juejin.cn/pen/7123427292306817060) |
| zig | [lang-zig](https://xitu.github.io/jcode-languages/dist/lang-zig.json) | [ğŸ¦‰ zig-demo](https://code.juejin.cn/pen/7123497832207613988) |

## å¦‚ä½•æ‰©å±•æˆ‘çš„è‡ªå®šä¹‰è¯­è¨€

#### å‡†å¤‡è¯­æ³•é«˜äº®JSONæ–‡ä»¶

ç ä¸Šæ˜é‡‘æ”¯æŒJSONæ ¼å¼çš„Monaco Editorè¯­æ³•é«˜äº®é…ç½®ï¼Œè€Œé€šå¸¸çš„Monaco Editorè¯­æ³•é«˜æ–‡ä»¶æ˜¯JSæ–‡ä»¶ï¼Œéœ€è¦è½¬æˆå¯¹åº”çš„JSONã€‚

å¯ä»¥forkæœ¬ä»£ç ä»“åº“ï¼Œç›´æ¥å°†è¯­æ³•é«˜äº®JSæ–‡ä»¶å¤åˆ¶åˆ°srcç›®å½•ï¼Œç„¶åè¿è¡Œ`npm run build`ï¼Œä¼šè‡ªåŠ¨æ„å»ºå¹¶ç”Ÿæˆdistç›®å½•ä¸‹å¯¹åº”çš„JSONæ–‡ä»¶ã€‚

ä¹‹åå¯ä»¥è‡ªå·±å‘å¸ƒè¿™ä¸ªJSONï¼Œæˆ–è€…ç»™æœ¬é¡¹ç›®æäº¤PRï¼Œä»£ç åˆå¹¶åï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ï¼š

`https://xitu.github.io/jcode-languages/dist/lang-ä½ çš„è¯­è¨€ç±»å‹.json`

æ¥è®¿é—®äº†ã€‚

#### è®¾ç½®hashbang

è¯­æ³•ä¸ºï¼š

```
#!/jcode/lang/ä½ çš„è¯­è¨€ç±»å‹ https://xitu.github.io/jcode-languages/dist/lang-ä½ çš„è¯­è¨€ç±»å‹.json
```

ç„¶åå°±å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„ä½¿ç”¨è¯´æ˜ï¼Œå†™è‡ªå·±çš„è‡ªå®šä¹‰è¯­è¨€ä»£ç äº†ã€‚
